{% extends "base.html" %}
{% block styles %} <!-- using this for a minimal look so no footer or nav appears on login -->
<link rel="stylesheet" href="{{ url_for('static', filename='search.css') }}">
{% endblock %}
{% block main_content %}
  <h1>Search Results</h1>

  {% if movies_by_genre %}
    <!-- Display movies grouped by genre -->
    {% for genre, movies in movies_by_genre.items() %}
      <section id="genre-section">
        <h2>{{ genre }}</h2>
        <section id="movie-grid">
          {% for movie in movies %}
            <article id="movie-card">
              <img src="{{ movie.image_url }}" alt="{{ movie.title }}">
              <section id="movie-details">
                <h3>{{ movie.title }}</h3>
                <p>{{ movie.description }}</p>
                <p><small>Score: {{ movie.score }}</small></p>
                <a href="{{ url_for('movie_details', movie_id=movie.movie_id) }}" class="btn">View Details</a>
              </section>
            </article>
          {% endfor %}
        </section>
      </section>
    {% endfor %}
  {% else %}
    <!-- Display regular search results -->
    {% if results %}
      <section id="movie-grid">
        {% for movie in results %}
          <article id="movie-card">
            <img src="{{ movie.image_url }}" alt="{{ movie.title }}">
            <section id="movie-details">
              <h3>{{ movie.title }}</h3>
              <p>{{ movie.description }}</p>
              <p><small>Score: {{ movie.score }}</small></p>
              <a href="{{ url_for('movie_details', movie_id=movie.movie_id) }}" class="btn">View Details</a>
            </section>
          </article>
        {% endfor %}
      </section>
    {% else %}
      <p>No results found.</p>
    {% endif %}
  {% endif %}
{% endblock %}